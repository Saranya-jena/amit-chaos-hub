{"apiVersion":"argoproj.io/v1alpha1","kind":"Workflow","metadata":{"creationTimestamp":null,"name":"chaos-studio-push","namespace":"hce"},"spec":{"arguments":{"parameters":[{"name":"adminModeNamespace","value":"hce"}]},"entrypoint":"demo-push-3-exp","podGC":{"strategy":"OnWorkflowCompletion"},"securityContext":{"runAsNonRoot":true,"runAsUser":1000},"serviceAccountName":"argo-chaos","templates":[{"inputs":{},"metadata":{},"name":"demo-push-3-exp","outputs":{},"steps":[[{"arguments":{},"name":"install-chaos-faults","template":"install-chaos-faults"}],[{"arguments":{},"name":"pod-delete-x4m","template":"pod-delete-x4m"}],[{"arguments":{},"name":"pod-cpu-hog-6jz","template":"pod-cpu-hog-6jz"},{"arguments":{},"name":"pod-network-loss-c97","template":"pod-network-loss-c97"}],[{"arguments":{},"name":"cleanup-chaos-resources","template":"cleanup-chaos-resources"}]]},{"container":{"args":["kubectl apply -f /tmp/ -n {{workflow.parameters.adminModeNamespace}} && sleep 30"],"command":["sh","-c"],"image":"chaosnative/k8s:2.11.0","name":"","resources":{}},"inputs":{"artifacts":[{"name":"pod-delete-x4m","path":"/tmp/pod-delete-x4m.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\ndescription:\\n  message: |\\n    Deletes a pod belonging to a deployment/statefulset/daemonset\\nkind: ChaosExperiment\\nmetadata:\\n  name: pod-delete\\n  labels:\\n    name: pod-delete\\n    app.kubernetes.io/part-of: litmus\\n    app.kubernetes.io/component: chaosexperiment\\n    app.kubernetes.io/version: ci\\nspec:\\n  definition:\\n    scope: Namespaced\\n    permissions:\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods\\n        verbs:\\n          - create\\n          - delete\\n          - get\\n          - list\\n          - patch\\n          - update\\n          - deletecollection\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - events\\n        verbs:\\n          - create\\n          - get\\n          - list\\n          - patch\\n          - update\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - configmaps\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/log\\n        verbs:\\n          - get\\n          - list\\n          - watch\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/exec\\n        verbs:\\n          - get\\n          - list\\n          - create\\n      - apiGroups:\\n          - apps\\n        resources:\\n          - deployments\\n          - statefulsets\\n          - replicasets\\n          - daemonsets\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - apps.openshift.io\\n        resources:\\n          - deploymentconfigs\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - replicationcontrollers\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - argoproj.io\\n        resources:\\n          - rollouts\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - batch\\n        resources:\\n          - jobs\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - delete\\n          - deletecollection\\n      - apiGroups:\\n          - litmuschaos.io\\n        resources:\\n          - chaosengines\\n          - chaosexperiments\\n          - chaosresults\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - patch\\n          - update\\n          - delete\\n    image: chaosnative/go-runner:ci\\n    imagePullPolicy: Always\\n    args:\\n      - -c\\n      - ./experiments -name pod-delete\\n    command:\\n      - /bin/bash\\n    env:\\n      - name: TOTAL_CHAOS_DURATION\\n        value: \\"15\\"\\n      - name: RAMP_TIME\\n        value: \\"\\"\\n      - name: FORCE\\n        value: \\"true\\"\\n      - name: CHAOS_INTERVAL\\n        value: \\"5\\"\\n      - name: PODS_AFFECTED_PERC\\n        value: \\"\\"\\n      - name: LIB\\n        value: litmus\\n      - name: TARGET_CONTAINER\\n        value: \\"\\"\\n      - name: TARGET_PODS\\n        value: \\"\\"\\n      - name: DEFAULT_HEALTH_CHECK\\n        value: \\"false\\"\\n      - name: NODE_LABEL\\n        value: \\"\\"\\n      - name: SEQUENCE\\n        value: parallel\\n    labels:\\n      name: pod-delete\\n      app.kubernetes.io/part-of: litmus\\n      app.kubernetes.io/component: experiment-job\\n      app.kubernetes.io/version: ci\\n"}},{"name":"pod-cpu-hog-6jz","path":"/tmp/pod-cpu-hog-6jz.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\ndescription:\\n  message: |\\n    Injects cpu consumption on pods belonging to an app deployment\\nkind: ChaosExperiment\\nmetadata:\\n  name: pod-cpu-hog\\n  labels:\\n    name: pod-cpu-hog\\n    app.kubernetes.io/part-of: litmus\\n    app.kubernetes.io/component: chaosexperiment\\n    app.kubernetes.io/version: ci\\nspec:\\n  definition:\\n    scope: Namespaced\\n    permissions:\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods\\n        verbs:\\n          - create\\n          - delete\\n          - get\\n          - list\\n          - patch\\n          - update\\n          - deletecollection\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - events\\n        verbs:\\n          - create\\n          - get\\n          - list\\n          - patch\\n          - update\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - configmaps\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/log\\n        verbs:\\n          - get\\n          - list\\n          - watch\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/exec\\n        verbs:\\n          - get\\n          - list\\n          - create\\n      - apiGroups:\\n          - apps\\n        resources:\\n          - deployments\\n          - statefulsets\\n          - replicasets\\n          - daemonsets\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - apps.openshift.io\\n        resources:\\n          - deploymentconfigs\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - replicationcontrollers\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - argoproj.io\\n        resources:\\n          - rollouts\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - batch\\n        resources:\\n          - jobs\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - delete\\n          - deletecollection\\n      - apiGroups:\\n          - litmuschaos.io\\n        resources:\\n          - chaosengines\\n          - chaosexperiments\\n          - chaosresults\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - patch\\n          - update\\n          - delete\\n    image: chaosnative/go-runner:ci\\n    imagePullPolicy: Always\\n    args:\\n      - -c\\n      - ./experiments -name pod-cpu-hog\\n    command:\\n      - /bin/bash\\n    env:\\n      - name: TOTAL_CHAOS_DURATION\\n        value: \\"60\\"\\n      - name: CPU_CORES\\n        value: \\"1\\"\\n      - name: CPU_LOAD\\n        value: \\"100\\"\\n      - name: PODS_AFFECTED_PERC\\n        value: \\"\\"\\n      - name: RAMP_TIME\\n        value: \\"\\"\\n      - name: LIB\\n        value: litmus\\n      - name: LIB_IMAGE\\n        value: chaosnative/go-runner:ci\\n      - name: STRESS_IMAGE\\n        value: alexeiled/stress-ng:latest-ubuntu\\n      - name: CONTAINER_RUNTIME\\n        value: docker\\n      - name: SOCKET_PATH\\n        value: /var/run/docker.sock\\n      - name: TARGET_CONTAINER\\n        value: \\"\\"\\n      - name: TARGET_PODS\\n        value: \\"\\"\\n      - name: DEFAULT_HEALTH_CHECK\\n        value: \\"false\\"\\n      - name: NODE_LABEL\\n        value: \\"\\"\\n      - name: SEQUENCE\\n        value: parallel\\n    labels:\\n      name: pod-cpu-hog\\n      app.kubernetes.io/part-of: litmus\\n      app.kubernetes.io/component: experiment-job\\n      app.kubernetes.io/runtime-api-usage: \\"true\\"\\n      app.kubernetes.io/version: ci\\n"}},{"name":"pod-network-loss-c97","path":"/tmp/pod-network-loss-c97.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\ndescription:\\n  message: |\\n    Injects network packet loss on pods belonging to an app deployment\\nkind: ChaosExperiment\\nmetadata:\\n  name: pod-network-loss\\n  labels:\\n    name: pod-network-loss\\n    app.kubernetes.io/part-of: litmus\\n    app.kubernetes.io/component: chaosexperiment\\n    app.kubernetes.io/version: ci\\nspec:\\n  definition:\\n    scope: Namespaced\\n    permissions:\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods\\n        verbs:\\n          - create\\n          - delete\\n          - get\\n          - list\\n          - patch\\n          - update\\n          - deletecollection\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - events\\n        verbs:\\n          - create\\n          - get\\n          - list\\n          - patch\\n          - update\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - configmaps\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/log\\n        verbs:\\n          - get\\n          - list\\n          - watch\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - pods/exec\\n        verbs:\\n          - get\\n          - list\\n          - create\\n      - apiGroups:\\n          - apps\\n        resources:\\n          - deployments\\n          - statefulsets\\n          - replicasets\\n          - daemonsets\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - apps.openshift.io\\n        resources:\\n          - deploymentconfigs\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - \\"\\"\\n        resources:\\n          - replicationcontrollers\\n        verbs:\\n          - get\\n          - list\\n      - apiGroups:\\n          - argoproj.io\\n        resources:\\n          - rollouts\\n        verbs:\\n          - list\\n          - get\\n      - apiGroups:\\n          - batch\\n        resources:\\n          - jobs\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - delete\\n          - deletecollection\\n      - apiGroups:\\n          - litmuschaos.io\\n        resources:\\n          - chaosengines\\n          - chaosexperiments\\n          - chaosresults\\n        verbs:\\n          - create\\n          - list\\n          - get\\n          - patch\\n          - update\\n          - delete\\n    image: chaosnative/go-runner:ci\\n    imagePullPolicy: Always\\n    args:\\n      - -c\\n      - ./experiments -name pod-network-loss\\n    command:\\n      - /bin/bash\\n    env:\\n      - name: TARGET_CONTAINER\\n        value: \\"\\"\\n      - name: LIB_IMAGE\\n        value: chaosnative/go-runner:ci\\n      - name: NETWORK_INTERFACE\\n        value: eth0\\n      - name: TC_IMAGE\\n        value: gaiadocker/iproute2\\n      - name: NETWORK_PACKET_LOSS_PERCENTAGE\\n        value: \\"100\\"\\n      - name: TOTAL_CHAOS_DURATION\\n        value: \\"60\\"\\n      - name: RAMP_TIME\\n        value: \\"\\"\\n      - name: LIB\\n        value: litmus\\n      - name: PODS_AFFECTED_PERC\\n        value: \\"\\"\\n      - name: DEFAULT_HEALTH_CHECK\\n        value: \\"false\\"\\n      - name: TARGET_PODS\\n        value: \\"\\"\\n      - name: NODE_LABEL\\n        value: \\"\\"\\n      - name: CONTAINER_RUNTIME\\n        value: docker\\n      - name: DESTINATION_IPS\\n        value: \\"\\"\\n      - name: DESTINATION_HOSTS\\n        value: \\"\\"\\n      - name: SOCKET_PATH\\n        value: /var/run/docker.sock\\n      - name: SEQUENCE\\n        value: parallel\\n    labels:\\n      name: pod-network-loss\\n      app.kubernetes.io/part-of: litmus\\n      app.kubernetes.io/component: experiment-job\\n      app.kubernetes.io/runtime-api-usage: \\"true\\"\\n      app.kubernetes.io/version: ci\\n"}}]},"metadata":{},"name":"install-chaos-faults","outputs":{}},{"container":{"args":["kubectl delete chaosengine -l workflow_run_id={{workflow.uid}} -n {{workflow.parameters.adminModeNamespace}}"],"command":["sh","-c"],"image":"chaosnative/k8s:2.11.0","name":"","resources":{}},"inputs":{},"metadata":{},"name":"cleanup-chaos-resources","outputs":{}},{"container":{"args":["-file=/tmp/chaosengine-pod-delete-x4m.yaml","-saveName=/tmp/engine-name"],"image":"chaosnative/litmus-checker:2.11.0","name":"","resources":{}},"inputs":{"artifacts":[{"name":"pod-delete-x4m","path":"/tmp/chaosengine-pod-delete-x4m.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\nkind: ChaosEngine\\nmetadata:\\n  namespace: \\"{{workflow.parameters.adminModeNamespace}}\\"\\n  generateName: pod-delete-x4m\\n  labels:\\n    workflow_run_id: \\"{{ workflow.uid }}\\"\\nspec:\\n  appinfo:\\n    appns: default\\n    applabel: app=nginx\\n    appkind: deployment\\n  engineState: active\\n  chaosServiceAccount: litmus-admin\\n  experiments:\\n    - name: pod-delete\\n      spec:\\n        components:\\n          env:\\n            - name: TOTAL_CHAOS_DURATION\\n              value: \\"30\\"\\n            - name: CHAOS_INTERVAL\\n              value: \\"10\\"\\n            - name: FORCE\\n              value: \\"false\\"\\n            - name: PODS_AFFECTED_PERC\\n              value: \\"\\"\\n        probe:\\n          - name: healthcheck\\n            type: cmdProbe\\n            mode: Edge\\n            runProperties:\\n              probeTimeout: 180\\n              retry: 0\\n              interval: 1\\n              stopOnFailure: true\\n            cmdProbe/inputs:\\n              command: ./healthcheck -name pod-level\\n              source:\\n                image: chaosnative/go-runner:ci\\n                inheritInputs: true\\n              comparator:\\n                type: string\\n                criteria: contains\\n                value: \\"[P000]\\"\\n"}}]},"metadata":{"labels":{"weight":"10"}},"name":"pod-delete-x4m","outputs":{}},{"container":{"args":["-file=/tmp/chaosengine-pod-cpu-hog-6jz.yaml","-saveName=/tmp/engine-name"],"image":"chaosnative/litmus-checker:2.11.0","name":"","resources":{}},"inputs":{"artifacts":[{"name":"pod-cpu-hog-6jz","path":"/tmp/chaosengine-pod-cpu-hog-6jz.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\nkind: ChaosEngine\\nmetadata:\\n  namespace: \\"{{workflow.parameters.adminModeNamespace}}\\"\\n  generateName: pod-cpu-hog-6jz\\n  labels:\\n    workflow_run_id: \\"{{ workflow.uid }}\\"\\nspec:\\n  engineState: active\\n  appinfo:\\n    appns: default\\n    applabel: app=nginx\\n    appkind: deployment\\n  chaosServiceAccount: litmus-admin\\n  experiments:\\n    - name: pod-cpu-hog\\n      spec:\\n        components:\\n          env:\\n            - name: TOTAL_CHAOS_DURATION\\n              value: \\"60\\"\\n            - name: CPU_CORES\\n              value: \\"1\\"\\n            - name: PODS_AFFECTED_PERC\\n              value: \\"\\"\\n            - name: CONTAINER_RUNTIME\\n              value: docker\\n            - name: SOCKET_PATH\\n              value: /var/run/docker.sock\\n        probe:\\n          - name: healthcheck\\n            type: cmdProbe\\n            mode: Edge\\n            runProperties:\\n              probeTimeout: 180\\n              retry: 0\\n              interval: 1\\n              stopOnFailure: true\\n            cmdProbe/inputs:\\n              command: ./healthcheck -name pod-level\\n              source:\\n                image: chaosnative/go-runner:ci\\n                inheritInputs: true\\n              comparator:\\n                type: string\\n                criteria: contains\\n                value: \\"[P000]\\"\\n"}}]},"metadata":{"labels":{"weight":"10"}},"name":"pod-cpu-hog-6jz","outputs":{}},{"container":{"args":["-file=/tmp/chaosengine-pod-network-loss-c97.yaml","-saveName=/tmp/engine-name"],"image":"chaosnative/litmus-checker:2.11.0","name":"","resources":{}},"inputs":{"artifacts":[{"name":"pod-network-loss-c97","path":"/tmp/chaosengine-pod-network-loss-c97.yaml","raw":{"data":"apiVersion: litmuschaos.io/v1alpha1\\nkind: ChaosEngine\\nmetadata:\\n  namespace: \\"{{workflow.parameters.adminModeNamespace}}\\"\\n  generateName: pod-network-loss-c97\\n  labels:\\n    workflow_run_id: \\"{{ workflow.uid }}\\"\\nspec:\\n  engineState: active\\n  appinfo:\\n    appns: default\\n    applabel: app=nginx\\n    appkind: deployment\\n  chaosServiceAccount: litmus-admin\\n  experiments:\\n    - name: pod-network-loss\\n      spec:\\n        components:\\n          env:\\n            - name: TOTAL_CHAOS_DURATION\\n              value: \\"60\\"\\n            - name: NETWORK_PACKET_LOSS_PERCENTAGE\\n              value: \\"100\\"\\n            - name: CONTAINER_RUNTIME\\n              value: docker\\n            - name: SOCKET_PATH\\n              value: /var/run/docker.sock\\n            - name: PODS_AFFECTED_PERC\\n              value: \\"\\"\\n        probe:\\n          - name: healthcheck\\n            type: cmdProbe\\n            mode: Edge\\n            runProperties:\\n              probeTimeout: 180\\n              retry: 0\\n              interval: 1\\n              stopOnFailure: true\\n            cmdProbe/inputs:\\n              command: ./healthcheck -name pod-level\\n              source:\\n                image: chaosnative/go-runner:ci\\n                inheritInputs: true\\n              comparator:\\n                type: string\\n                criteria: contains\\n                value: \\"[P000]\\"\\n"}}]},"metadata":{"labels":{"weight":"10"}},"name":"pod-network-loss-c97","outputs":{}}]},"status":{"finishedAt":null,"startedAt":null}}
